<form id="rescheduleForm">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br>

    <label for="phone">Phone Number:</label>
    <input type="text" id="phone" name="phone" required><br>

    <button type="submit">Look Me Up</button>
</form>

<div id="results"></div>

<script>
    const form = document.getElementById('rescheduleForm');
    const results = document.getElementById('results');

    form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const email = document.getElementById('email').value;
        const phone = document.getElementById('phone').value;

        try {
            const response = await fetch('https://script.google.com/macros/s/AKfycbzOQNNaW2Bh4CR927ZsVQJ6jW3ImyBbpjr8CVuOavbJc7hjZyNCp9kCzGd28ojVZ6drew/exec', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ email, phone })
            });

            if (!response.ok) {
                throw new Error('Network response was not ok');
            }

            const data = await response.json();
            if (data.success) {
                results.innerHTML = data.matches.map(match => `
                    <div>
                        <p><strong>Name:</strong> ${match.name}</p>
                        <p><strong>Address:</strong> ${match.address}</p>
                        <p><strong>Date:</strong> ${match.date}</p>
                        <p><strong>Time:</strong> ${match.time}</p>
                        <button onclick="reschedule('${match.bookingId}')">Reschedule</button>
                    </div>
                    <hr>
                `).join('');
            } else {
                results.innerHTML = 'No matching bookings found.';
            }
        } catch (error) {
            console.error('Error:', error);
            results.innerHTML = 'Error fetching data. Please try again later.';
        }
    });

    function reschedule(bookingId) {
        alert('Rescheduling for booking ID: ' + bookingId);
        // Add further rescheduling steps here
    }
</script>
