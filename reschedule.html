<form id="rescheduleForm">
    <label for="email">Email:</label>
    <input type="email" id="email" name="email" required><br>

    <label for="phone">Phone Number:</label>
    <input type="text" id="phone" name="phone" required><br>

    <button type="submit">Look Me Up</button>
</form>

<div id="results"></div>

<script>
    document.getElementById("rescheduleForm").addEventListener("submit", async function(event) {
    event.preventDefault();

    const GOOGLE_SHEET_WEBHOOK_URL = "https://script.google.com/macros/s/AKfycbwHnJUtKevOzFkROXVZ-hnmOH4GRaQGwaVY1kUgWCXdtH5x-R5BlohVF9CuMD0c-AypzQ/exec";
    const formData = new FormData(this);

    try {
        const response = await fetch(GOOGLE_SHEET_WEBHOOK_URL, {
            method: "POST",
            body: formData
        });

        if (response.ok) {
            const data = await response.json();
            if (data.success) {
                alert("Lookup successful!");
                document.getElementById("results").innerHTML = data.matches.map(match => `
                    <div>
                        <p><strong>Name:</strong> ${match.name}</p>
                        <p><strong>Address:</strong> ${match.address}</p>
                        <p><strong>Date:</strong> ${match.date}</p>
                        <p><strong>Time:</strong> ${match.time}</p>
                        <button onclick="reschedule('${match.bookingId}')">Reschedule</button>
                    </div>
                    <hr>
                `).join('');
            } else {
                alert("No matching bookings found.");
            }
        } else {
            throw new Error("Server error");
        }
    } catch (error) {
        alert("Error: " + error.message);
    }
});

  </script>
